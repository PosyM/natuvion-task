<!-- NEW: Bulk Delete Button (Visible only when items are selected) -->
<table
  flowbiteTable
  [tableHead]="headerTemplate"
  [tableBody]="bodyTemplate"
  [data]="employees"
  [striped]="true"
>
  <!-- 1. HEADER TEMPLATE -->
  <ng-template #headerTemplate>
    <tr flowbiteTableHead>
      <!-- Checkbox Header -->
      <th scope="col" class="p-4 rounded-s-lg"></th>

      <!-- Sortable Headers -->
      <th scope="col" class="px-6 py-3 cursor-pointer" (click)="onColumnHeaderClick('name')">
        <div class="flex items-center gap-2">Name</div>
      </th>
      <th scope="col" class="px-6 py-3 cursor-pointer" (click)="onColumnHeaderClick('role')">
        <div class="flex items-center gap-2">Role</div>
      </th>
      <th scope="col" class="px-6 py-3 cursor-pointer" (click)="onColumnHeaderClick('email')">
        <div class="flex items-center gap-2">Email</div>
      </th>
      <th scope="col" class="px-6 py-3 cursor-pointer" (click)="onColumnHeaderClick('active')">
        <div class="flex items-center gap-2">Status</div>
      </th>

      <!-- Actions Header -->
      <th scope="col" class="px-6 py-3 rounded-e-lg">Actions</th>
    </tr>
  </ng-template>

  <!--  BODY TEMPLATE -->
  <ng-template #bodyTemplate let-employee>
    <tr flowbiteTableBody class="hover:bg-gray-50 dark:hover:bg-gray-600">
      <!-- Checkbox Cell -->
      <td class="w-4 p-4">
        <div class="flex items-center">
          <input
            [id]="'checkbox-' + employee.id"
            type="checkbox"
            [checked]="selectedIds.has(employee.id)"
            (change)="toggleSelection(employee.id, $event)"
            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
          />
          <label [for]="'checkbox-' + employee.id" class="sr-only">checkbox</label>
        </div>
      </td>

      <!-- Data Cells -->
      <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
        {{ employee.name }}
      </td>
      <td class="px-6 py-4">{{ employee.role }}</td>
      <td class="px-6 py-4">{{ employee.email }}</td>

      <!-- Status Badge -->
      <td class="px-6 py-4">
        <span
          class="px-2.5 py-0.5 rounded text-sm font-medium"
          [ngClass]="employee.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'"
        >
          {{ employee.active ? 'Active' : 'Inactive' }}
        </span>
      </td>

      <!-- Actions -->
      <td class="px-6 py-4">
        <!-- Edit Action button - (Pencil) -->
        <button
          (click)="onEditActionClick(employee)"
          type="button"
          class="cursor-pointer text-gray-900 hover:text-gray-600 transition-colors focus:outline-none"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-5 h-5"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"
            />
          </svg>
          <span class="sr-only">Edit</span>
        </button>
      </td>
    </tr>
  </ng-template>
</table>

<div>
  <button
    (click)="onDeleteSelected()"
    class="text-white mt-5 bg-red-600 hover:bg-red-700 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-red-600 dark:hover:bg-red-700 focus:outline-none dark:focus:ring-red-800"
  >
    Delete
  </button>
</div>
